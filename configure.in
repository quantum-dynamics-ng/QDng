AC_INIT(configure.in)


AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(QDng, 0.1)

AC_LANG_CPLUSPLUS
AC_PROG_CXX
AC_PROG_F77

AM_PROG_LIBTOOL

dnl lib/header checks
AC_CHECK_HEADER(libxml/parser.h,,AC_MSG_ERROR(libxml2 headers are missing))
AC_CHECK_LIB(xml2, fftw_plan_dft,,AC_MSG_ERROR(libxml is missing))

AC_CHECK_HEADER(fftw3.h,,AC_MSG_ERROR(fftw3 headers are missing))
AC_CHECK_LIB(fftw3, fftw_plan_dft,,AC_MSG_ERROR(fftw3 libs are missing))

AC_CHECK_LIB(lapack, dlamch_ ,,AC_MSG_ERROR(LAPACK is missing))

dnl Configure C/F77 mixed mode (RT libs)
AC_F77_LIBRARY_LDFLAGS

AC_ARG_ENABLE([mpi],
	    [AS_HELP_STRING([--enable-mpi],[Build with support for mpi parallization])],
	    [],enable_mpi=no)

AC_ARG_WITH([mpi-prefix],
	    [AS_HELP_STRING([--with-mpi-prefix=PATH],[Prefix of the mpi installation])],
	    [],with_mpi-prefix=no)


AC_OUTPUT(Makefile src/Makefile src/qdlib/Makefile src/tools/Makefile src/fft/Makefile src/math/Makefile src/modules/Makefile src/tests/Makefile src/slatec/Makefile)
